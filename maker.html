<html>
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
        <meta http-equiv="Pragma" content="no-cache">
        <meta http-equiv="Expires" content="0">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>オリジナルのサイトスワップを作成/Let's Make an Original Siteswap</title>
        <style>
            /*好きな数値を選びオリジナルのサイトスワップを作ることができます。*/

            input[name = "skaku"] {
                size: 10; /*--幅--*/
                padding: 10px; /*--余白--*/
                font-size: 20px; /*--文字サイズ--*/
                border: solid 2px #cccccc; /*--ボーダー線--*/
                border-radius: 15px; /*--角丸--*/
            }

            input[name="syousaisettei"] {
                size: 10; /*--幅--*/
                padding: 5px; /*--余白--*/
                font-size: 18px; /*--文字サイズ--*/
                border: solid 1px #cccccc; /*--ボーダー線--*/
                border-radius: 10px; /*--角丸--*/
            }

            form{
                width:100%;
                padding:0;
                margin:0;
            }

            a.cp_btn {
                display: block;
                width: 160px;
                padding: 0.8em;
                text-align: center;
                text-decoration: none;
                color: #EC407A;
                border: 2px solid #EC407A;
                border-radius: 3px;
                transition: .4s;
            }

            a.cp_btn:hover {
                background: #EC407A;
                color: #fff;
            }

            div.erer{
                color: #ff0000;
            }

            div.saitosyousai{
                font-size:18px;
            }

            #haiiro{
                color:#a9a9a9;
                font-size:12px;
            }

            #ohuhowa{
                color:#444444
            }

            .syousaitabu label {
                color:#555555;
            }

            .syousaitabu {
                padding: 0.5em 1em;
                margin: 2em 0;
                color: #2c2c2f;
                background: #EEEEEE;/*背景色*/
            }
            .syousaitabu p {
                margin: 0; 
                padding: 0;
            }

            .simple_square_btn2 {
                display: block;
                position: relative;
                width: 100px;
                padding: 0.3em;
                text-align: center;
                text-decoration: none;
                color: #444444;
                background: #fff;
                border:1px solid #DDDDDD;
                border-radius: 5px;
                font-size:14px;
                margin-top:24px;
            }

            .simple_square_btn2:hover {
                background: #222222;
                color: white;
                cursor: pointer;
                text-decoration: none;
            }

            .simple_square_btn3 {
                display: block;
                position: relative;
                width: 70px;
                padding: 0.3em;
                text-align: center;
                text-decoration: none;
                color: #444444;
                background: rgb(192, 192, 192);
                border:1px solid #DDDDDD;
                border-radius: 5px;
                font-size:12px;
                margin-top:24px;
            }

            .simple_square_btn3:hover {
                background: #4b4b4b;
                color: white;
                cursor: pointer;
                text-decoration: none;
            }

            #saitosyousai3{
                font-size:30px;
                user-select:text;
            }

            #saitosyousai9{
                display:none;
            }

            #saitosyousai10{
                display:none;
            }

            #saitosyousai12{
                display:none;
            }

            #saitosyousai13{
                display:none;
            }

            #saitosyousai14{
                display:none;
            }

            #saitosyousai15{
                display:none;
            }

            section {
                max-width: 300px;
                margin: 0 auto;
            }

            a.btn_02 {
                display: flex;
                justify-content: center;
                align-items: center;
                background: #fff;
                border: 1px solid #228bc8;
                box-sizing: border-box;
                width: 96px;
                height: 30px;
                padding: 0 6% 0 12%;
                color: #228bc8;
                font-size: 16px;
                text-align: left;
                text-decoration: none;
                position: relative;
                transition-duration: 0.2s;
                border-radius: 3px;
            }

            a.btn_02:hover {
                background: #228bc8;
                color: #fff;
            }

            a.btn_02:before {
                content: "";
                display: inline-block;
                width: 0;
                height: 0;
                border-style: solid;
                border-width: 7px 0 7px 8px;
                border-color: transparent transparent transparent #228bc8;
                position: absolute;
                top: 50%;
                left: 6%;
                margin-top: -7px;
            }

            a.btn_02:hover:before {
                border-color: transparent transparent transparent #fff;
            }

            canvas {
                background-color: #5a5a5a;
                z-index: 3;
              }
              
              .container {
                width: 100%;
                height: 500px;
              }
        </style>
        <style>
            /* CSSコード */
            @import url('https://fonts.googleapis.com/css2?family=M+PLUS+Rounded+1c:wght@800&display=swap');
        </style>
        <link rel="stylesheet" href="all.css">
    </head>
   
   
    <body>
        <center>
            <a href="home">
                <h1 style="display: flex;justify-content: center;"><img src="title.png" alt="ブラウザで高精度で多機能なジャグリングのシミュレーションができる【サイトスワップ
                    マスター】" style="border-radius:20px;width:100px;height:auto;margin-top:3px;"></h1>
                </a>
            <p>オリジナルのサイトスワップを作ることができます。</p>
            <p><strong>半角英数字</strong>で入力してください。</p>
            <form>
                <p><div class="kakunin">
                    <label for="skaku">ボールの数を指定してください/Number of balls</label>
                    <input type="text" name="skaku" id="skaku">
                </div></p>
                <a href="#" class="cp_btn" id="kakuninbtn">新規作成</a>
            </form>
            <div class = "erer">
                <p><output id = "er2" name = "er2"></output></p>
                <p><output id = "er" name = "er"></output></p>
                <p><output id = "er1" name = "er1"></output></p>
            </div>
            <div class = "saitosyousai">
                <p><output id = "saitosyousai20" name = "saitosyousai"></output></p>
            </div>
                <div class="container">
                    <canvas id="canvas" width="300" height="500"></canvas>
                </div>
                <div id ="speedrange">
                    <input type="range" name="syousaisettei" id="syousaisettei5" min="0" max="100" value="30">
                </div>
                <div id = "erer" class = "erer">
                    <p><output id = "ercanvs" name = "er"></output></p>
                    <p><output id = "er3" name = "er3"></output></p>
                    </div>
            <div class = "saitosyousai">
                <p><output id = "saitosyousai1" name = "saitosyousai"></output></p>
                <p><output id = "saitosyousai2" name = "saitosyousai"></output></p>
                <p><output id = "saitosyousai3" name = "saitosyousai"></output></p>
                <p><output id = "saitosyousai8" name = "saitosyousai"></output></p>
                <div class="cp_ipselect cp_sl01">
                    <select id="sel1"></select>
                </div>
                <div><a href="#" class="simple_square_btn2" id = "tuikabtn">追加</a></div>
                <div><a href="#" class="simple_square_btn3" id = "modorubtn">一つ削除</a></div>
            </div>
            <p><output id = "saitosyousai4" name = "saitosyousai"></output></p>
            <p><section>
                <a href="#" class="btn_02" id = "syuuryoubtn">終了</a>
            </section></p>
            <hr>
            <div class="syousaitabu">
                <div id = "syousais">
                    <p id = "ohuhowa">上級者用詳細設定</p>
                    <p>
                    <label for="syousaisettei1">直前のサイトスワップ</label>
                    <input type="text" name="syousaisettei" id="syousaisettei1">
                    </p>
                    <p>
                    <label for="syousaisettei2">直後のサイトスワップ</label>
                    <input type="text" name="syousaisettei" id="syousaisettei2">
                    </p>
                    <p id = "haiiro">※詳細設定は無記入でも作成可能です。無記入の場合、前後を基底状態（カスケード、ファウンテン）として作成します。</p>
                    <p id = "haiiro">※前後のサイトスワップの状態が異なる場合、作成されるサイトスワップがループ不可能になることにご注意ください。</p>
                </div>
            </div>
            <a href="home"  class="button smallButton">ホームに戻る</a>
            <p id = "haiiro">※「対応していない文字が含まれています」と表示された場合は、全角になっていないか、空欄が含まれていないか、を確認してください。</p>
            <p>2022/1/9-ver1.0</p>
            <p>2022/1/9-ver1.1(デザイン修正)</p>
            <p>2022/1/12-ver1.2(バグ修正)</p>
            <p>2022/5/26-ver2.0(削除機能追加)</p>
            <p>2023/1/17-ver3.0(シミュレーション機能追加)</p>
            <p>2023/1/18-ver3.1(UI修正)</p>

            <p><input name = "textr" type="text" id="saitosyousai9" readonly = ""></p>
            <p><input name = "textr" type="text" id="saitosyousai10" readonly = ""></p>
            <p><input name = "textr" type="text" id="saitosyousai12" readonly = ""></p>
            <p><input name = "textr" type="text" id="saitosyousai13" readonly = ""></p>
            <p><input name = "textr" type="text" id="saitosyousai14" readonly = ""></p>
            <p><input name = "textr" type="text" id="saitosyousai15" readonly = ""></p>



        </center>

        <script>
let objectColor="#FFFFFF",playerColor="#000000",playerhidden=!1,view_speed=3,s_num_l=null,is=null,s_sy_l=null,is_sy=null,requestId=null,requestId2=null,ballSim=[],ballSimHand=[],ballSimHand2=[],handSim=[],y_ini=400,ballSim_gl,lastTime,co,x1=null,x2=null,x3=null,x4=null,g_ini=10,max_h_pa=null,maxh=30,ii=0,ii2=0,iit,iit2,iit3,iit4,x3mag,x4mag,s_numonly_l,nagekata=[],nagekata2=[];ctx=(canvas=document.getElementById("canvas")).getContext("2d"),width=canvas.width,height=canvas.height;var syousaisettei5=document.querySelector("#syousaisettei5");function updateFirst5(e){view_speed=e.target.value/10}syousaisettei5.addEventListener("input",updateFirst5,!1);const convert_num={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,b:11,c:12,d:13,e:14,f:15,g:16,h:17,i:18,j:19,k:20,l:21,m:22,n:23,o:24,p:25,q:26,r:27,s:28,t:29,u:30,v:31,w:32,x:33,y:34,z:35,A:10,B:11,C:12,D:13,E:14,F:15,G:16,H:17,I:18,J:19,K:20,L:21,M:22,N:23,O:24,P:25,Q:26,R:27,S:28,T:29,U:30,V:31,W:32,X:33,Y:34,Z:35,$:"$","-":"-","/":"/","+":"+","(":"(",",":",",")":")"};function ave_sait(e){let t=0;for(let a=0;a<e.length;a++)t+=e[a];return t/e.length}function existsSameValue(e){return new Set(e).size!=e.length}function check_the_numbers(e){let t=[],a=!1;for(let l=0;l<e.length;l++)if("$"==e[l]||"-"==e[l]||"/"==e[l]||"+"==e[l]){if(a)return!1;a=!0}else t.push(e[l]),a=!1;if(a||ave_sait(t)%1!=0)return!1;{let i=[];for(let n=0;n<t.length;n++)i.push((Number(t[n])+n+1)%t.length);for(let u=0;u<t.length;u++)if(existsSameValue(i))return!1;return!0}}function in_convert(e){return e in convert_num}function check_conv(e){let t=0;for(let a=0;a<e.length;a++)in_convert(e[a])&&(t+=1);return t==e.length}function max_height(e){let t=function(e,t){return Math.max(e,t)};return e.reduce(t)}function ballSize(e){return 1==max_height(e)||0==max_height(e)||2==max_height(e)||3==max_height(e)||4==max_height(e)?16:80/max_height(e)}function s_numonly_f(e){let t=[];for(let a=0;a<e.length;a++)"$"==e[a]||"-"==e[a]||"/"==e[a]||"+"==e[a]?(t.push([e[a+1],e[a]]),a++):t.push([e[a],"#"]);return t}function ini_ballSim(e){let t=[];e.length%2==1&&(e=e.concat(e));for(let a=0;a<e.length;a++)a%2==0?e[a][0]%2==0?("#"==e[a][1]&&t.push([e[a][0],"RR",0,y_ini,"#",x2,x1]),"/"==e[a][1]&&t.push([e[a][0],"RR",0,y_ini,"/",x1,x2]),"+"==e[a][1]&&t.push([e[a][0],"RR",0,y_ini,"+",x1,x1]),"-"==e[a][1]&&t.push([e[a][0],"RR",0,y_ini,"-",x2,x2])):("#"==e[a][1]&&(1==e[a][0]&&"#"==e[(a+1)%e.length][1]||1==e[a][0]&&"-"==e[(a+1)%e.length][1]?t.push([e[a][0],"RL",0,y_ini,"#",x2,x3]):t.push([e[a][0],"RL",0,y_ini,"#",x2,x4])),"/"==e[a][1]&&(1==e[a][0]&&"/"==e[(a+1)%e.length][1]||1==e[a][0]&&"+"==e[(a+1)%e.length][1]?t.push([e[a][0],"RL",0,y_ini,"/",x1,x4]):t.push([e[a][0],"RL",0,y_ini,"/",x1,x3])),"+"==e[a][1]&&(1==e[a][0]&&"#"==e[(a+1)%e.length][1]||1==e[a][0]&&"-"==e[(a+1)%e.length][1]?t.push([e[a][0],"RL",0,y_ini,"+",x1,x3]):t.push([e[a][0],"RL",0,y_ini,"+",x1,x4])),"-"==e[a][1]&&(1==e[a][0]&&"/"==e[(a+1)%e.length][1]||1==e[a][0]&&"+"==e[(a+1)%e.length][1]?t.push([e[a][0],"RL",0,y_ini,"-",x2,x4]):t.push([e[a][0],"RL",0,y_ini,"-",x2,x3]))):e[a][0]%2==0?("#"==e[a][1]&&t.push([e[a][0],"LL",0,y_ini,"#",x3,x4]),"/"==e[a][1]&&t.push([e[a][0],"LL",0,y_ini,"/",x4,x3]),"+"==e[a][1]&&t.push([e[a][0],"LL",0,y_ini,"+",x4,x4]),"-"==e[a][1]&&t.push([e[a][0],"LL",0,y_ini,"-",x3,x3])):("#"==e[a][1]&&(1==e[a][0]&&"#"==e[(a+1)%e.length][1]||1==e[a][0]&&"-"==e[(a+1)%e.length][1]?t.push([e[a][0],"LR",0,y_ini,"#",x3,x2]):t.push([e[a][0],"LR",0,y_ini,"#",x3,x1])),"/"==e[a][1]&&(1==e[a][0]&&"/"==e[(a+1)%e.length][1]||1==e[a][0]&&"+"==e[(a+1)%e.length][1]?t.push([e[a][0],"LR",0,y_ini,"/",x4,x1]):t.push([e[a][0],"LR",0,y_ini,"/",x4,x2])),"+"==e[a][1]&&(1==e[a][0]&&"#"==e[(a+1)%e.length][1]||1==e[a][0]&&"-"==e[(a+1)%e.length][1]?t.push([e[a][0],"LR",0,y_ini,"+",x4,x2]):t.push([e[a][0],"LR",0,y_ini,"+",x4,x1])),"-"==e[a][1]&&(1==e[a][0]&&"/"==e[(a+1)%e.length][1]||1==e[a][0]&&"+"==e[(a+1)%e.length][1]?t.push([e[a][0],"LR",0,y_ini,"-",x3,x1]):t.push([e[a][0],"LR",0,y_ini,"-",x3,x2])));return t}function createBall(e,t,a,l){let i=e[0]-1,n=e[6],u=e[5];u==n&&(n+=.1);let s=n-u,o=g_ini,_=u+e[2],r=s/(i*iit3);1==e[0]&&(r=s/1);let g=y_ini-o*(i+1)**2/max_h_pa;2==e[0]&&(g=y_ini-o*(i+25.5/(x4mag-x3mag))**2/max_h_pa);let m=(u+n)/2,v=(g-y_ini)/((m-u)*(m-n))*((_+=r*t*view_speed)-u)*(_-n)+y_ini;v<=y_ini+1&&(ctx.beginPath(),ctx.arc(_,v,a,0,2*Math.PI),ctx.fill()),ballSim[l]=[e[0],e[1],_-u,v,e[4],e[5],e[6]]}function createBallHand(e,t,a,l){let i=e[4],n=e[3];n==i&&(i+=.1);let u=i-n,s=n+e[1],o,_=(n+i)/2,r=-((y_ini-g_ini*(1+25.5/(x4mag-x3mag))**2/max_h_pa-y_ini)/((_-n)*(_-i)))*((s+=u/(1*iit3)*t*view_speed)-n)*(s-i)+y_ini;ctx.beginPath(),ctx.arc(s,r,a,0,2*Math.PI),ctx.fill(),ballSimHand[l]=[e[0],s-n,r,e[3],e[4]]}function player(e,t,a){let l,i,n=e[4],u=e[3];switch(e[0]){case"RU":l=1,i=-1,"_"==n&&(n=x1),"_"==u&&(u=x2);break;case"RD":l=-1,i=-1,"_"==u&&(u=x1),"_"==n&&(n=x2);break;case"LU":l=1,i=1,"_"==n&&(n=x4),"_"==u&&(u=x3);break;case"LD":l=-1,i=1,"_"==u&&(u=x4),"_"==n&&(n=x3);break;default:console.log("バグ")}u==n&&(n+=.1);let s=n-u,o=u+e[1],_,r=(u+n)/2,g=l*((y_ini-g_ini*(1+25.5/(x4mag-x3mag))**2/max_h_pa-y_ini)/((r-u)*(r-n)))*((o+=s/(1*iit3)*t*view_speed)-u)*(o-n)+y_ini;playerhidden||(ctx.beginPath(),ctx.moveTo(o,g),ctx.lineTo(width/2+i*(x4mag-x3mag)/.9-(o-width/2)/5,y_ini-(x4mag-x3mag)/1.7+(g-y_ini)/7),ctx.stroke(),ctx.beginPath(),ctx.moveTo(width/2+i*(x4mag-x3mag)/.9-(o-width/2)/5,y_ini-(x4mag-x3mag)/1.7+(g-y_ini)/7),ctx.lineTo(width/2+i*(x4mag-x3mag)/2,y_ini-(x4mag-x3mag)*1.6),ctx.lineTo(width/2+i*(x4mag-x3mag)/12,y_ini-(x4mag-x3mag)*1.7),ctx.stroke(),ctx.beginPath(),ctx.fillStyle=playerColor,ctx.fill(),ctx.arc(width/2+i*(x4mag-x3mag)/.9-(o-width/2)/5,y_ini-(x4mag-x3mag)/1.7+(g-y_ini)/7,(x4mag-x3mag)*.113,0,2*Math.PI),ctx.fill(),ctx.fillStyle=objectColor),handSim[a]=[e[0],o-u,g,u,n]}function playerBody(){playerhidden||(ctx.strokeStyle=playerColor,ctx.beginPath(),ctx.arc(width/2,y_ini-(x4mag-x3mag)*2.5+(x4mag-x3mag)/6,(x4mag-x3mag)/1.5-(x4mag-x3mag)/6,0,2*Math.PI),ctx.stroke(),ctx.beginPath(),ctx.moveTo(width/2,y_ini-(x4mag-x3mag)*2.5+(x4mag-x3mag)/1.5),ctx.lineTo(width/2,y_ini),ctx.lineTo(width/2+(x4mag-x3mag)*.6,y_ini+(x4mag-x3mag)*3/2),ctx.lineTo(width/2+(x4mag-x3mag),y_ini+(x4mag-x3mag)*3),ctx.lineTo(width/2+(x4mag-x3mag)*.9,y_ini+(x4mag-x3mag)*3),ctx.lineTo(width/2+(x4mag-x3mag)*.6,y_ini+(x4mag-x3mag)*3/2),ctx.stroke(),ctx.beginPath(),ctx.moveTo(width/2,y_ini),ctx.lineTo(width/2-(x4mag-x3mag)*.6,y_ini+(x4mag-x3mag)*3/2),ctx.lineTo(width/2-(x4mag-x3mag),y_ini+(x4mag-x3mag)*3),ctx.lineTo(width/2-(x4mag-x3mag)*.9,y_ini+(x4mag-x3mag)*3),ctx.lineTo(width/2-(x4mag-x3mag)*.6,y_ini+(x4mag-x3mag)*3/2),ctx.stroke(),ctx.fillStyle=objectColor)}function tick(e){if(!0==is){ctx.fillStyle=objectColor;let t=s_numonly_f(s_num_l);s_numonly_l=[];for(let a=0;a<t.length;a++)s_numonly_l.push(t[a][0]);let l=max_height(s_numonly_l);l>=5?(x2=Math.floor(width/2-170/l),x3=Math.floor(width/2+170/l),max_h_pa=g_ini*l**2/(y_ini-maxh)):(x2=Math.floor(width/2-34),x3=Math.floor(width/2+34),max_h_pa=25*g_ini/(y_ini-maxh)),x4=Math.floor((x3-width/2)*1.5+x3),x1=Math.floor(x2-(x3-width/2)*1.5),x4mag=((x3mag=l>=5?width/2+170/l:width/2+34)-width/2)*1.5+x3,ballSim_gl=ini_ballSim(t),ballSim=[],ballSimHand=[],ballSimHand2=[],handSim=[],ii=0,iit=1,iit2=0,iit3=0,nagekata=[];for(let i=0;i<36;i++)nagekata.push("_");nagekata2=[];for(let n=0;n<36;n++)nagekata2.push("_");ctx.lineWidth=(x4mag-x3mag)/5}if(!1!=is){lastTime||(lastTime=e);let u=(e-lastTime)/1e3;lastTime=e,ctx.clearRect(0,0,canvas.width,canvas.height),ctx.beginPath(),ctx.fill();let s=[];for(let o=0;o<ballSim.length;o++)ballSim[o][3]>y_ini||s.push(ballSim[o]);ballSim=s;let _=[];for(let r=0;r<ballSimHand.length;r++)ballSimHand[r][2]<y_ini||_.push(ballSimHand[r]);ballSimHand=_;let g=[];for(let m=0;m<handSim.length;m++)(handSim[m][2]>=y_ini&&"RU"!=handSim[m][0]&&"LU"!=handSim[m][0]||handSim[m][2]<=y_ini&&"RD"!=handSim[m][0]&&"LD"!=handSim[m][0])&&g.push(handSim[m]);handSim=g,playerBody();for(let v=0;v<handSim.length;v++)player(handSim[v],u,v);for(let $=0;$<ballSim.length;$++)createBall(ballSim[$],u,ballSize(s_numonly_l),$);for(let h=0;h<ballSimHand.length;h++)createBallHand(ballSimHand[h],u,ballSize(s_numonly_l),h);(iit+=u*view_speed)-iit2>1&&(nagekata.shift(),nagekata.push("_"),nagekata[ballSim_gl[ii%ballSim_gl.length][0]]=ballSim_gl[ii%ballSim_gl.length][6],nagekata2.shift(),nagekata2.push("_"),nagekata2[ballSim_gl[ii%ballSim_gl.length][0]]=ballSim_gl[ii%ballSim_gl.length][0],1!=nagekata2[1]&&"_"!=nagekata[1]&&ballSimHand.push([nagekata2[1],0,y_ini,nagekata[1],ballSim_gl[(ii+1)%ballSim_gl.length][5]]),0!=ballSim_gl[ii%ballSim_gl.length][0]&&ballSim.push(ballSim_gl[ii%ballSim_gl.length]),1==ballSim_gl[(ii+1)%ballSim_gl.length][0]&&(nagekata[2]=ballSim_gl[(ii+1)%ballSim_gl.length][6]),ii%2==0?(handSim.push(["RU",0,y_ini,ballSim_gl[ii%ballSim_gl.length][5],nagekata[2]]),handSim.push(["LD",0,y_ini,nagekata[1],ballSim_gl[(ii+1)%ballSim_gl.length][5]])):(handSim.push(["RD",0,y_ini,nagekata[1],ballSim_gl[(ii+1)%ballSim_gl.length][5]]),handSim.push(["LU",0,y_ini,ballSim_gl[ii%ballSim_gl.length][5],nagekata[2]])),ii+=1,iit3=iit-iit2,iit2=iit),requestId=requestAnimationFrame(tick)}!1==is&&(requestId=null,ctx.clearRect(0,0,canvas.width,canvas.height)),is=null}function startAnimation(e,t){s_num_l=e,is=t,null==requestId&&(requestId=requestAnimationFrame(tick))}function createSimulateCanvas(e){ercanvs.value=""}function startSimulation(e){let t=e.split(""),a=[];for(let l=0;l<t.length;l++)a.push(convert_num[t[l]]);check_the_numbers(a)?startAnimation(a,!0):check_conv(t)?""==t?(ercanvs.value="",startAnimation(a,!1)):t.length>100?(ercanvs.value="入力値が長すぎます",startAnimation(a,!1)):(ercanvs.value="直前の状態と直後の状態が異なりループすることができないためシミュレーションすることができません。(実際に投げることはできます)",startAnimation(a,!1)):(ercanvs.value="対応していない文字が含まれています",startAnimation(a,!1))}function stopAnimation(){startAnimation("",!1)}const convert_num2={a:10,b:11,c:12,d:13,e:14,f:15,g:16,h:17,i:18,j:19,k:20,l:21,m:22,n:23,o:24,p:25,q:26,r:27,s:28,t:29,u:30,v:31,w:32,x:33,y:34,z:35,A:10,B:11,C:12,D:13,E:14,F:15,G:16,H:17,I:18,J:19,K:20,L:21,M:22,N:23,O:24,P:25,Q:26,R:27,S:28,T:29,U:30,V:31,W:32,X:33,Y:34,Z:35,10:10,11:11,12:12,13:13,14:14,15:15,16:16,17:17,18:18,19:19,20:20,21:21,22:22,23:23,24:24,25:25,26:26,27:27,28:28,29:29,30:30,31:31,32:32,33:33,34:34,35:35,"":""},convert={0:"0",1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9",10:"a",11:"b",12:"c",13:"d",14:"e",15:"f",16:"g",17:"h",18:"i",19:"j",20:"k",21:"l",22:"m",23:"n",24:"o",25:"p",26:"q",27:"r",28:"s",29:"t",30:"u",31:"v",32:"w",33:"x",34:"y",35:"z"};let strage={strage_num_now:0},num_now=0;const isNumberAllowString=e=>{let t=typeof e;return!!("number"===t&&Number.isFinite(e)||"string"===t&&""!==e.trim()&&Number.isFinite(e-0))};function in_convert2(e){return isNumberAllowString(e)?Number(e):e in convert_num2?convert_num2[e]:"％＄存在しない"}function state_preparation(e){let t=[];for(;max_height(e)!=t.length;)for(let a=1;a<e.length+1&&(t.push(e[e.length-a]),t.length!=max_height(e));a++);return t}function state(e){let t=state_preparation(e),a=[];for(let l=1;l<max_height(e)+1;l++){let i=l-1,n=l;for(let u=0;u<t.length;u++){if(t[u]==n){a.push(i);break}n+=1}}return a}function nisin_state(e){let t=[],a=0;for(let l=0;l<max_height(e)+1;l++)l==e[a]?(t.push(1),a+=1):t.push(0);return t.reverse().join("")}function nisin_state_l(e){let t=[],a=0;for(let l=0;l<max_height(e)+1;l++)l==e[a]?(t.push(1),a+=1):t.push(0);let i=t.length;for(let n=0;n<36-i;n++)t.push(0);return t}function tuginosuuzi_itiran_l(e){let t=[];for(let a=0;a<e.length;a++)0==e[a]&&t.push(a);return t}function itizutuhiku(e){return e=e.map(function(e){return e-1})}function main_process_st(e,t){let a=-1,l=0;for(;l<1e5;){var i=new Set(e),n=new Set(t);if(i.isSubset(n))break;e=itizutuhiku(e),t.unshift(a),a+=-1,l+=1}var u=new Set(e),s=new Set(t);let o=[],_=Array.from(o=s.difference(u));_.sort(function(e,t){return e<t?-1:1});let r=[];for(let g=0;g<_.length;g++)r.push(_[g]+(_.length-g));return r}function list_convert(e){var t=[];for(let a=0;a<e.length;a++)t.push(convert[e[a]]);return t}function nisinn_jussin_state(e){let t=[];for(let a=0;a<e.length;a++)1==e[a]&&t.push(a);return t}function convert_to_alphabet(e){let t=[];for(let a=0;a<e.length;a++)t.push(convert[e[a]]);return t}function option_delete(){let e=document.getElementById("sel1");for(;e.lastChild;)e.removeChild(e.lastChild)}function createSelectBox(e){var t=[{val:"0",txt:"0"},{val:"1",txt:"1"},{val:"2",txt:"2"},{val:"3",txt:"3"},{val:"4",txt:"4"},{val:"5",txt:"5"},{val:"6",txt:"6"},{val:"7",txt:"7"},{val:"8",txt:"8"},{val:"9",txt:"9"},{val:"10",txt:"a"},{val:"11",txt:"b"},{val:"12",txt:"c"},{val:"13",txt:"d"},{val:"14",txt:"e"},{val:"15",txt:"f"},{val:"16",txt:"g"},{val:"17",txt:"h"},{val:"18",txt:"i"},{val:"19",txt:"j"},{val:"20",txt:"k"},{val:"21",txt:"l"},{val:"22",txt:"m"},{val:"23",txt:"n"},{val:"24",txt:"o"},{val:"25",txt:"p"},{val:"26",txt:"q"},{val:"27",txt:"r"},{val:"28",txt:"s"},{val:"29",txt:"t"},{val:"30",txt:"u"},{val:"31",txt:"v"},{val:"32",txt:"w"},{val:"33",txt:"x"},{val:"34",txt:"y"},{val:"35",txt:"z"},];option_delete();for(var a=0;a<e.length;a++){let l=document.createElement("option");l.value=t[e[a]].val,l.text=t[e[a]].txt,document.getElementById("sel1").appendChild(l)}}function zerokaitika(e){return 0==e[0]?[0]:e}Set.prototype.isSubset=function(e){for(var t of this)if(!e.has(t))return!1;return!0},Set.prototype.difference=function(e){var t=new Set(this);for(var a of e)t.delete(a);return t};var button=document.getElementById("kakuninbtn");button.addEventListener("click",function(e){function t(e){return e<0?(er2.value="ボールの数は0以上にしてください",stopAnimation(),!1):e>35?(er2.value="ボールの数は35以下にしてください",stopAnimation(),!1):""==e?(er2.value="ボールの数を入力してください",stopAnimation(),!1):"％＄存在しない"==e?(er2.value="不適切な値が入力されています。",stopAnimation(),!1):(er2.value="",!0)}function a(e,t,a){return check_the_numbers(e)?ave_sait(e)==t||(er.value=`${i}は${t}ボールのサイトスワップではありません`,stopAnimation(),!1):check_conv(a)?""==a||(a.length>200?(er.value="詳細設定欄1の入力値が長すぎます",stopAnimation(),!1):(er.value=`${i}は投げられません`,stopAnimation(),!1)):(er.value="直前のサイトスワップ入力欄に対応していない文字が含まれています",stopAnimation(),!1)}function l(e,t,a){return check_the_numbers(e)?ave_sait(e)==t||(er1.value=`${s}は${t}ボールのサイトスワップではありません`,stopAnimation(),!1):check_conv(a)?""==a||(a.length>200?(er1.value="詳細設定欄2の入力値が長すぎます",stopAnimation(),!1):(er1.value=`${s}は投げられません`,stopAnimation(),!1)):(er1.value="直後のサイトスワップ入力欄に対応していない文字が含まれています",stopAnimation(),!1)}e.preventDefault(),stopAnimation(),er.value="",er1.value="",er2.value="",er3.value="",saitosyousai1.value="",saitosyousai2.value="",saitosyousai3.value="",saitosyousai4.value="",saitosyousai8.value="",saitosyousai9.value="",saitosyousai10.value="",saitosyousai12.value="",saitosyousai13.value="",saitosyousai14.value="",saitosyousai15.value="",saitosyousai20.value="",option_delete();var i=document.getElementById("syousaisettei1").value;let n=i.split(""),u=[];var s=document.getElementById("syousaisettei2").value;let o=s.split(""),_=[];var r=document.getElementById("skaku").value,g=in_convert2(r);for(let m=0;m<n.length;m++)u.push(convert_num[n[m]]);for(let v=0;v<o.length;v++)_.push(convert_num[o[v]]);if(t(g),t(g)&&(a(u,g,n),l(_,g,o),a(u,g,n)&&l(_,g,o))){if(""==i)var $=[g];else var $=u;if(""==s)var h=[g];else var h=_;let x=convert_to_alphabet(main_process_st(state($),state(h))).join(""),y=["_"],c=tuginosuuzi_itiran_l(zerokaitika(nisin_state_l(state($))));list_convert(tuginosuuzi_itiran_l(zerokaitika(nisin_state_l(state($))))),saitosyousai2.value=`↓作成中のサイトスワップ↓`,saitosyousai3.value=y.join(""),saitosyousai8.value="好きな数を選んで追加してください（追加可能な文字のみ選択肢に表示されます）",createSelectBox(c),saitosyousai9.value=nisin_state_l(state($)),saitosyousai10.value="新規作成ボタンが押されました",saitosyousai12.value=x,saitosyousai13.value=h,saitosyousai14.value=i,saitosyousai15.value=s,saitosyousai20.value=r+"ボールで作成します。下に移動してください。",strage.strage_num_now=0,strage[`strage_3_${num_now=0}`]=y.join(""),strage[`strage_box_${num_now}`]=c,strage[`strage_9_${num_now}`]=nisin_state_l(state($)),strage[`strage_12_${num_now}`]=x,""==x?saitosyousai4.value="終了ボタンを押すと完成します":saitosyousai4.value=`終了ボタンを押すと「${x}」が追加されて完成します`,createSimulateCanvas(1)}});var button2=document.getElementById("tuikabtn");button2.addEventListener("click",function(e){e.preventDefault();var t=document.getElementById("saitosyousai10").value,a=document.getElementById("saitosyousai14").value,l=document.getElementById("saitosyousai15").value,i=document.getElementById("syousaisettei1").value,n=document.getElementById("syousaisettei2").value;if("新規作成ボタンが押されました"==t){if(a==i&&l==n){var u=document.getElementById("sel1").value,s=document.getElementById("saitosyousai9").value,o=document.getElementById("saitosyousai3").value;let _=state(document.getElementById("saitosyousai13").value.split(","));er.value="",er1.value="",er2.value="",er3.value="",saitosyousai1.value="",saitosyousai2.value="",saitosyousai3.value="",saitosyousai4.value="",saitosyousai8.value="",saitosyousai9.value="",saitosyousai12.value="",saitosyousai20.value="";let r=s.split(",");r[u]=1,r.shift(),r.push(0);let g=o.split("");g[g.length-1]=convert[u],g.push("_");let m=nisinn_jussin_state(r),v=convert_to_alphabet(main_process_st(m,_)).join("");saitosyousai2.value=`↓作成中のサイトスワップ↓`,saitosyousai3.value=g.join(""),saitosyousai8.value="好きな数を選んで追加してください（追加可能な文字のみ選択肢に表示されます）",createSelectBox(tuginosuuzi_itiran_l(zerokaitika(r))),saitosyousai9.value=r,saitosyousai12.value=v,num_now=strage.strage_num_now+1,strage.strage_num_now=num_now,strage[`strage_3_${num_now}`]=g.join(""),strage[`strage_box_${num_now}`]=tuginosuuzi_itiran_l(zerokaitika(r)),strage[`strage_9_${num_now}`]=r,strage[`strage_12_${num_now}`]=v,""==v?saitosyousai4.value="終了ボタンを押すと完成します":saitosyousai4.value=`終了ボタンを押すと「${v}」が追加されて完成します`,createSimulateCanvas(1),startSimulation(g.join("").slice(0,-1)+v)}else er.value="",er1.value="",er2.value="",er3.value="",saitosyousai1.value="",saitosyousai2.value="",saitosyousai3.value="",saitosyousai4.value="",saitosyousai8.value="",saitosyousai20.value="",option_delete(),er3.value="作成中に設定を変更しないでください。新規作成し直してください。",stopAnimation()}else"終了ボタンが押されました"==t?er3.value="新しく作るには新規作成ボタンを押してください":er3.value="新規作成ボタンを押してください"});var button3=document.getElementById("syuuryoubtn");button3.addEventListener("click",function(e){e.preventDefault();var t=document.getElementById("saitosyousai10").value,a=document.getElementById("saitosyousai14").value,l=document.getElementById("saitosyousai15").value,i=document.getElementById("syousaisettei1").value,n=document.getElementById("syousaisettei2").value;if("新規作成ボタンが押されました"==t){if(a==i&&l==n){var u=document.getElementById("saitosyousai3").value,s=document.getElementById("saitosyousai12").value;er.value="",er1.value="",er2.value="",er3.value="",saitosyousai1.value="",saitosyousai2.value="",saitosyousai3.value="",saitosyousai4.value="",saitosyousai8.value="",saitosyousai9.value="",saitosyousai12.value="",saitosyousai20.value="";let o=u.split("");o[o.length-1]=s,saitosyousai10.value="終了ボタンが押されました",saitosyousai2.value=`↓オリジナルサイトスワップが完成しました↓`,saitosyousai3.value=`「${o.join("")}」`,createSimulateCanvas(1),startSimulation(o.join("")),option_delete()}else er.value="",er1.value="",er2.value="",er3.value="",saitosyousai1.value="",saitosyousai2.value="",saitosyousai3.value="",saitosyousai4.value="",saitosyousai8.value="",saitosyousai20.value="",option_delete(),er3.value="作成中に設定を変更しないでください。新規作成し直してください。",stopAnimation()}else"終了ボタンが押されました"==t?er3.value="新しく作るには新規作成ボタンを押してください":er3.value="新規作成ボタンを押してください"});var button4=document.getElementById("modorubtn");button4.addEventListener("click",function(e){e.preventDefault();var t=document.getElementById("saitosyousai10").value,a=document.getElementById("saitosyousai14").value,l=document.getElementById("saitosyousai15").value,i=document.getElementById("syousaisettei1").value,n=document.getElementById("syousaisettei2").value;if("新規作成ボタンが押されました"==t){if(a==i&&l==n){if(strage.strage_num_now>0){document.getElementById("sel1").value,document.getElementById("saitosyousai9").value,document.getElementById("saitosyousai3").value,state(document.getElementById("saitosyousai13").value.split(",")),er.value="",er1.value="",er2.value="",er3.value="",saitosyousai1.value="",saitosyousai2.value="",saitosyousai3.value="",saitosyousai4.value="",saitosyousai8.value="",saitosyousai9.value="",saitosyousai12.value="",saitosyousai20.value="";let u=strage.strage_num_now-1;strage.strage_num_now=u,saitosyousai2.value=`↓作成中のサイトスワップ↓`,saitosyousai3.value=strage[`strage_3_${u}`],saitosyousai8.value="好きな数を選んで追加してください（追加可能な文字のみ選択肢に表示されます）",createSelectBox(strage[`strage_box_${u}`]),saitosyousai9.value=strage[`strage_9_${u}`];let s=strage[`strage_12_${u}`];saitosyousai12.value=s,""==s?saitosyousai4.value="終了ボタンを押すと完成します":saitosyousai4.value=`終了ボタンを押すと「${s}」が追加されて完成します`,createSimulateCanvas(1),startSimulation(strage[`strage_3_${u}`].slice(0,-1)+s)}}else er.value="",er1.value="",er2.value="",er3.value="",saitosyousai1.value="",saitosyousai2.value="",saitosyousai3.value="",saitosyousai4.value="",saitosyousai8.value="",saitosyousai20.value="",option_delete(),er3.value="作成中に設定を変更しないでください。新規作成し直してください。",stopAnimation()}else"終了ボタンが押されました"==t?er3.value="新しく作るには新規作成ボタンを押してください":er3.value="新規作成ボタンを押してください"});
        </script>
    </body>
</html>